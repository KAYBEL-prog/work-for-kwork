<!DOCTYPE html>
<html lang='en'>
      <head>
        <meta charset='UTF-8'>
        <meta http-equiv='X-UA-Compatible' content='IE=edge'>
        <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no'>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
        
          <title>СОЦЧАТ - Общение без ограничений</title>
        </head>
  <body class="bg-black">

    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog ">
        <div class="modal-content bg-dark">
          <div class="modal-header">
            <h5 class="modal-title text-white" id="exampleModalLabel">Подтверждение телефона</h5>
            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="text-white text-center">
            <p class="m-0 mt-3 fs-5 px-2">Введите код для подверждения телефона</p>
          </div>
          <div class="modal-body ">
            <div class="d-flex gap-2 mx-auto" style="width: max-content;">
             <input type="phone" maxlength="1" class="form-control text-center fs-3" style="width: 60px; height: 60px;">
             <input type="phone" maxlength="1" class="form-control text-center fs-3" style="width: 60px; height: 60px;">
             <input type="phone" maxlength="1" class="form-control text-center fs-3" style="width: 60px; height: 60px;">
             <input type="phone" maxlength="1" class="form-control text-center fs-3" style="width: 60px; height: 60px;">
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn bg-black text-white" data-bs-toggle="modal" data-bs-target="#exampleModal2">Подтвердить</button>
          </div>
        </div>
      </div>
    </div>
    
    <div class="modal fade" id="exampleModal2" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog ">
        <div class="modal-content bg-dark">
          <div class="modal-header">
            <h5 class="modal-title text-white" id="exampleModalLabel">Подтверждение телефона</h5>
            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="Modal" aria-label="Close"></button>
          </div>
          <div class="modal-body ">
            <div class="text-white text-center">
              <p class="m-0 fs-5 px-2">код не верный</p>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn bg-black text-white" >Подтвердить</button>
          </div>
        </div>
      </div>
    </div>

    <div class="modal fade" id="exampleModal3" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog ">
        <div class="modal-content bg-dark">
          <div class="modal-header">
            <h5 class="modal-title text-white" id="exampleModalLabel">Подтверждение телефона</h5>
            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body ">
            <div class="text-white text-center">
              <p class="m-0 fs-5 px-2">Введите полный номер телефона</p>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn bg-black text-white" >Подтвердить</button>
          </div>
        </div>
      </div>
    </div>

    <section>
     <div class="container text-center d-flex align-items-center vh-100">
      <div class=" w-100 ">
        <div class="w-100 " style="background: url(../assets/img/logo/logo-white.svg); background-size: contain; background-repeat: no-repeat; background-position: center; height: 250px;"></div>
        <form class="needs-validation d-flex justify-content-center mx-auto mh-100 mt-5" style="min-width: 300px; ">
          <div class=" row col-11 p-0">
            <div class="text-white text-center mb-3 col-10 mx-auto">
              <p class="m-0 mt-3 fs-5">Введите ваш номер телефона, на него придёт код активации, который необходимо ввести на следующем шаге</p>
            </div>
            <input type="phone" class="col-9 col-lg-4  mx-auto" style="height: 40px;" id="phone" value="+7 (___) ___-__-__" placeholder="+7 (___) ___-__-__" required/>
            <div class="col-12 d-flex justify-content-center">
              <button class="btn border bg-warning mt-4 text-center" id="sendBtn" type="button">Отправить</button>
            </div>
          </div>
        </form>
        </div>

     </div>
    </section>

  </body>
<script>

const inputs = document.querySelectorAll("input");

    inputs.forEach((input, index) => {
      input.addEventListener("input", () => {
        if (input.value.length === 1 && index < inputs.length - 1) {
          inputs[index + 1].focus();
        }
      });

      input.addEventListener("keydown", (e) => {
        if (e.key === "Backspace" && input.value === "" && index > 0) {
          inputs[index - 1].focus();
        }
      });
    });

//

// 
const input = document.getElementById('phone');
const mask = '+7 (___) ___-____';

input.value = mask;

input.addEventListener('focus', () => {
  if (input.value === mask) input.setSelectionRange(4,4);
});

input.addEventListener('keydown', e => {
  const pos = input.selectionStart;
  if (!/[0-9]/.test(e.key) && !['Backspace','Delete','ArrowLeft','ArrowRight'].includes(e.key)) {
    e.preventDefault();
    return;
  }
  if (e.key === 'Backspace') {
    e.preventDefault();
    let val = input.value.split('');
    let i = pos - 1;
    while (i > 3 && mask[i] !== '_') i--;
    if (i >= 4) {
      val[i] = '_';
      input.value = val.join('');
      input.setSelectionRange(i, i);
    }
  }
  if (e.key === 'Delete') {
    e.preventDefault();
    let val = input.value.split('');
    let i = pos;
    while (i < mask.length && mask[i] !== '_') i++;
    if (i < mask.length) {
      val[i] = '_';
      input.value = val.join('');
      input.setSelectionRange(i, i);
    }
  }
});

// ввод цифр
input.addEventListener('input', () => {
  let digits = input.value.replace(/\D/g,'').slice(1); // цифры после 7
  let i = 0;
  input.value = mask.replace(/_/g, _ => digits[i++] || '_');

  let pos = input.value.indexOf('_');
  input.setSelectionRange(pos === -1 ? input.value.length : pos, pos === -1 ? input.value.length : pos);
});
// 
  const phoneInput = document.getElementById('phone');
  const sendBtn = document.getElementById('sendBtn');

  sendBtn.addEventListener('click', () => {
    const phoneValue = phoneInput.value.replace(/\D/g, ''); // оставляем только цифры

    if (phoneValue.length !== 11) {
      // Номер неполный → открываем модальное окно exampleModal3
      const incompleteModal = new bootstrap.Modal(document.getElementById('exampleModal3'));
      incompleteModal.show();
    } else {
      // Номер полный → открываем модальное окно exampleModal
      const completeModal = new bootstrap.Modal(document.getElementById('exampleModal'));
      completeModal.show();
    }
  });
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>

</html>